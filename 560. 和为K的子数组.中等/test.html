<!DOCTYPE html>
<html>

<head>
    <title></title>
</head>

<body>
    <script type="text/javascript">
    /**
 * @param {number[]} nums
 * @param {number} k
 * @return {number}
 */
var subarraySum = function(nums, k) {
  let map = new Map();
  let sum = 0,res = 0;
  for(let key in nums){
    sum += nums[key];
    if(sum == k) res++;
    let subSum = sum - k, value = null;
    if(map.has(subSum)) res+=map.get(subSum).length;
    if(map.has(sum)){
      value = map.get(sum)
    } else{
      value = new Array();
    }
    value.push(key);
    map.set(sum,value)
  }
  return res;
};
    console.log(subarraySum([0,1,1,1,0,2,1],3))
    </script>
</body>

</html>